# Flutter 组件开发规范

## 基本要求

- 组件名称：组件名称应该简洁明了，能够准确描述组件的功能。
- 组件功能：组件应该具有明确的功能，能够满足用户的需求。
- 组件样式：组件应该具有统一的样式，能够保持一致的视觉效果。
- 组件交互：组件应该具有良好的交互体验，能够方便用户使用。
- 组件文档：组件应该具有详细的文档，能够帮助用户理解组件的使用方法。
- 组件测试：组件应该具有详细的测试用例，能够帮助用户理解组件的使用方法。
- 组件宽度：组件宽度应该自适应，避免使用固定宽度。

## 目录结构规范

```text
lib/
├── pages/ # 页面目录
│ ├── pages.dart # 统一导出所有页面
│ ├── calendar/ # 功能模块目录
│ │ ├── widgets/ # 页面专用组件
│ │ ├── models/ # 页面数据模型
│ │ ├── services/ # 页面服务
│ │ └── calendar_page.dart # 页面主文件
│ └── ...
├── widgets/ # 全局共享组件
│ └── ...
└── main.dart # 应用入口文件
```

## 命名规范

1. 文件命名：
   - 使用小写字母
   - 单词间用下划线连接
   - 页面文件以 `_page.dart` 结尾
   - 组件文件以用途命名，如 `lunar_calendar.dart`

2. 类命名：
   - 使用 PascalCase 命名法
   - 页面类以 Page 结尾，如 `CalendarPage`
   - 组件类应表明用途，如 `LunarCalendar`

## 代码规范

1. 组件声明：

```dart
/// 组件的用途说明
class MyWidget extends StatelessWidget {
/// 创建组件的说明
const MyWidget({
super.key,
required this.param,
});
/// 参数说明
final Type param;
}
```

2. 注释规范：
   - 使用 /// 为公开 API 添加文档注释
   - 使用 // 为实现细节添加注释
   - 所有公开的属性和方法都应该有文档注释

3. 状态管理：
   - 将状态尽可能下放到最近的父级
   - 使用 StatefulWidget 时，状态变量应该是私有的
   - 通过回调函数向上传递状态变化

4. 组件封装：
   - 遵循单一职责原则
   - 通过属性和回调函数提供定制能力
   - 避免组件之间的强耦合

## 测试规范

1. 单元测试：
   - 测试组件的业务逻辑
   - 测试状态管理
   - 测试回调函数

2. Widget 测试：
   - 测试组件的渲染
   - 测试组件的交互
   - 测试组件的生命周期

## 性能优化

1. 避免不必要的重建：
   - 使用 const 构造函数
   - 合理使用 StatefulWidget
   - 适当使用 IndexedStack 保持页面状态

2. 资源管理：
   - 及时释放资源
   - 避免内存泄漏
   - 合理使用缓存

## 无障碍支持

- 提供合适的语义标签
- 支持屏幕阅读器
- 确保足够的颜色对比度